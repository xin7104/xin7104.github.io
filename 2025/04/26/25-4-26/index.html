

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar3.png">
  <link rel="icon" href="/img/avatar3.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="1hexo clean &amp;&amp; hexo g &amp;&amp; hexo d  今日份总算是有点进展了捏，把第二个摄像头安上去了,安在了第一个的上面。 也可以扫到二维码c很好 不愧是能进到06的人啊 废话不多说 二维码可以扫，每扫到变化的二维码就发数字给单片机，用串口3接收，本来要用数据包，but有问题，每次只能隔一个接收。算了，后来换成只发单个数据了，单片机接收的很好。 去吃晚">
<meta property="og:type" content="article">
<meta property="og:title" content="25-4-26">
<meta property="og:url" content="https://xin7104.github.io/2025/04/26/25-4-26/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1hexo clean &amp;&amp; hexo g &amp;&amp; hexo d  今日份总算是有点进展了捏，把第二个摄像头安上去了,安在了第一个的上面。 也可以扫到二维码c很好 不愧是能进到06的人啊 废话不多说 二维码可以扫，每扫到变化的二维码就发数字给单片机，用串口3接收，本来要用数据包，but有问题，每次只能隔一个接收。算了，后来换成只发单个数据了，单片机接收的很好。 去吃晚">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-04-26T06:20:13.000Z">
<meta property="article:modified_time" content="2025-04-26T13:50:47.981Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>25-4-26 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xin7104.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/cef422ec1fe2b8a9e2d6374fb9d7a99.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="25-4-26"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-04-26 14:20" pubdate>
          April 26, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.9k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          25 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">25-4-26</h1>
            
            
              <div class="markdown-body">
                
                <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d<br></code></pre></td></tr></table></figure>

<h1 id="今日份"><a href="#今日份" class="headerlink" title="今日份"></a>今日份</h1><p>总算是有点进展了捏，把第二个摄像头安上去了,安在了第一个的上面。</p>
<p>也可以扫到二维码<br>c很好</p>
<p>不愧是能进到06的人啊</p>
<p>废话不多说</p>
<p>二维码可以扫，每扫到变化的二维码就发数字给单片机，用串口3接收，本来要用数据包，but有问题，每次只能隔一个接收。算了，后来换成只发单个数据了，单片机接收的很好。</p>
<p>去吃晚饭前的代码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>  &#123;<br>	  <span class="hljs-keyword">if</span>(x!=<span class="hljs-number">1</span>)<br>		   Load(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<br>	  <span class="hljs-keyword">if</span>(x==<span class="hljs-number">1</span>&amp;&amp;t==<span class="hljs-number">0</span>)&#123;<br>		  out1 = PID_realize2(&amp;pidHW_Tracking,s) ;<br>		  Load(<span class="hljs-number">20</span>-out1,<span class="hljs-number">20</span>+out1);<br>	  &#125;<br>	  <span class="hljs-keyword">if</span>(t==<span class="hljs-number">1</span>)&#123;<br>		  Load(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>		  HAL_Delay(<span class="hljs-number">500</span>);<br>		  t=<span class="hljs-number">0</span>;<br>	  &#125;<br>	  <span class="hljs-keyword">if</span>(g_ucUsart2ReceiveData==<span class="hljs-number">0x00</span>&amp;&amp;x==<span class="hljs-number">1</span>)&#123;<br>		  HAL_Delay(<span class="hljs-number">800</span>);<br>		  Load(<span class="hljs-number">15</span>,<span class="hljs-number">-15</span>);<br>		  <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>		  &#123;<br>			  HAL_Delay(<span class="hljs-number">1</span>);<br>			  <span class="hljs-keyword">if</span>(g_ucUsart2ReceiveData!=<span class="hljs-number">0x00</span>)&#123;<span class="hljs-keyword">break</span>;&#125;<br>		  &#125;<br>	  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>只要开始循迹x就会变为1，识别到新的二维码的话t变1，t每次变1就停500ms，并清零t。</p>
<p>摄像头循迹代码还是换了之前的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sensor, image, time,math,machine<br><span class="hljs-keyword">from</span> pyb <span class="hljs-keyword">import</span> UART<br><span class="hljs-keyword">from</span> vl53l1x <span class="hljs-keyword">import</span> VL53L1X<br><span class="hljs-keyword">from</span> pyb <span class="hljs-keyword">import</span> LED<br><br>uart = UART(<span class="hljs-number">3</span>, <span class="hljs-number">115200</span>)<br>green_led = LED(<span class="hljs-number">2</span>)<br>sensor.reset()<br>sensor.set_pixformat(sensor.RGB565)<br><span class="hljs-comment"># 关闭自动白平衡</span><br>sensor.set_auto_exposure(<span class="hljs-literal">False</span>)<br>sensor.set_auto_whitebal(<span class="hljs-literal">False</span>)<br>sensor.set_auto_gain(<span class="hljs-literal">False</span>)<br>sensor.set_framesize(sensor.QQVGA)<br>sensor.skip_frames(<span class="hljs-number">10</span>)<br>clock = time.clock()<br><br>red_threshold=(<span class="hljs-number">0</span>, <span class="hljs-number">86</span>, <span class="hljs-number">5</span>, <span class="hljs-number">49</span>, <span class="hljs-number">5</span>, <span class="hljs-number">68</span>)<br>green_threshold=(<span class="hljs-number">43</span>, <span class="hljs-number">100</span>, -<span class="hljs-number">35</span>, -<span class="hljs-number">128</span>, <span class="hljs-number">11</span>, <span class="hljs-number">127</span>)<br>lastx = <span class="hljs-number">0</span><br>lastx2 = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sending_data3</span>(<span class="hljs-params">x</span>):<br>    FH = <span class="hljs-built_in">bytearray</span>([x])<br>    uart.write(FH);<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">send_uart</span>(<span class="hljs-params">deflection_angle,deflection_angle2</span>):<br>    sending_data3(<span class="hljs-number">0xA5</span>)<br>    time.sleep_ms(<span class="hljs-number">5</span>)<br>    sending_data3(deflection_angle)<br>    time.sleep_ms(<span class="hljs-number">5</span>)<br>    sending_data3(deflection_angle2)<br>    time.sleep_ms(<span class="hljs-number">5</span>)<br>    sending_data3(<span class="hljs-number">0x5B</span>)<br>    time.sleep_ms(<span class="hljs-number">5</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_max</span>(<span class="hljs-params">blobs</span>):<br>    max_size=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> blob <span class="hljs-keyword">in</span> blobs:<br>        <span class="hljs-keyword">if</span> blob[<span class="hljs-number">2</span>]*blob[<span class="hljs-number">3</span>] &gt; max_size:<br>            max_blob=blob<br>            max_size = blob[<span class="hljs-number">2</span>]*blob[<span class="hljs-number">3</span>]<br>    <span class="hljs-keyword">return</span> max_blob<br><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">True</span>):<br>    clock.tick()<br>    img = sensor.snapshot()<br>    green_led.on()<br>    blobs = img.find_blobs([red_threshold])<br>    <span class="hljs-keyword">if</span> blobs:<br>        max_blob = find_max(blobs)<br>        lastx = max_blob.cx()<br>        <span class="hljs-comment">#lasty = max_blob.cy()</span><br>        img.draw_cross(max_blob.cx(), max_blob.cy())<br>        lastx=lastx-<span class="hljs-number">120</span>;<br>        d = <span class="hljs-string">&quot;%d&quot;</span> %(lastx)<br>        uart.write(<span class="hljs-string">&#x27;a&#x27;</span>);<br>        uart.write(<span class="hljs-string">&#x27;b&#x27;</span>);<br>        uart.write(d);<br>        uart.write(<span class="hljs-string">&#x27;e&#x27;</span>);<br>    <span class="hljs-keyword">else</span>:<br>        sending_data3(<span class="hljs-number">0x00</span>)<br><br>    blobs2 = img.find_blobs([green_threshold])<br>    <span class="hljs-keyword">if</span> blobs2:<br>        max_blob2 = find_max(blobs2)<br>        lastx2 = max_blob2.cx()<br>        <span class="hljs-comment">#lasty = max_blob.cy()</span><br>        img.draw_cross(max_blob2.cx(), max_blob2.cy())<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;lastx:&quot;</span>,lastx,<span class="hljs-string">&quot;lastx2:&quot;</span>,lastx2)<br><br></code></pre></td></tr></table></figure>

<p>发x坐标 - 120</p>
<p>下面是稍微改了一点点的识别二维码的代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 二维码识别示例</span><br><span class="hljs-keyword">import</span> sensor, image, time<br><span class="hljs-keyword">from</span> machine <span class="hljs-keyword">import</span> UART <span class="hljs-comment">#引入串口模块</span><br>sensor.reset()<br>sensor.set_pixformat(sensor.GRAYSCALE)<br>sensor.set_framesize(sensor.VGA)<br>sensor.set_windowing((<span class="hljs-number">480</span>, <span class="hljs-number">480</span>)) <span class="hljs-comment"># 看VGA分辨率中间的240x240像素。</span><br>sensor.skip_frames(<span class="hljs-number">30</span>)<br>sensor.set_auto_gain(<span class="hljs-literal">False</span>)  <span class="hljs-comment"># 必须关闭此功能，以防止图像冲洗…</span><br><br>uart = UART(<span class="hljs-number">3</span>, <span class="hljs-number">115200</span>)<br>clock = time.clock()<br>last_payload = <span class="hljs-literal">None</span>  <span class="hljs-comment"># 用来保存上一次识别到的二维码内容</span><br>THRESHOLD = (<span class="hljs-number">0</span>, <span class="hljs-number">120</span>)  <span class="hljs-comment"># 可以根据具体情况调整阈值，0 是黑色，100 是白色</span><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">True</span>):<br>    clock.tick()<br>    img = sensor.snapshot()<br>   <span class="hljs-comment"># for code in img.find_qrcodes():</span><br>    <span class="hljs-comment">#    print(code)</span><br>    <span class="hljs-comment">#img.binary([THRESHOLD])  # 对图像进行二值化处理</span><br>    codes = img.find_qrcodes()<br>    <span class="hljs-keyword">if</span> codes:<br>        payload = codes[<span class="hljs-number">0</span>].payload()  <span class="hljs-comment"># 假设只识别一个二维码</span><br>        <span class="hljs-keyword">if</span> payload != last_payload:<br>            last_payload = payload<br>            <span class="hljs-built_in">print</span>(payload)<br>            <span class="hljs-keyword">if</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/RlYaaoM/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;1&quot;</span>:<br>                out = <span class="hljs-string">&quot;1&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/bDNqqqx/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;2&quot;</span>:<br>                out = <span class="hljs-string">&quot;2&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/RMkwwwj/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;3&quot;</span>:<br>                out = <span class="hljs-string">&quot;3&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/Ay4eeeX/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;4&quot;</span>:<br>                out = <span class="hljs-string">&quot;4&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/O8eDDDV/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;5&quot;</span>:<br>                out = <span class="hljs-string">&quot;5&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/O9Dmmmy/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;6&quot;</span>:<br>                out = <span class="hljs-string">&quot;6&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/OdB888K/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;7&quot;</span>:<br>                out = <span class="hljs-string">&quot;7&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/AGwdddv/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;8&quot;</span>:<br>                out = <span class="hljs-string">&quot;8&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/AQp7778/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;9&quot;</span>:<br>                out = <span class="hljs-string">&quot;9&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/R4e222J/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;10&quot;</span>:<br>                out = <span class="hljs-string">&quot;10&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/AV8YYYN/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;11&quot;</span>:<br>                out = <span class="hljs-string">&quot;11&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br>            <span class="hljs-keyword">elif</span> payload == <span class="hljs-string">&quot;https://5v60oq.58u.cn/a/AxqWWWQ/&quot;</span> <span class="hljs-keyword">or</span> payload ==<span class="hljs-string">&quot;12&quot;</span>:<br>                out = <span class="hljs-string">&quot;12&quot;</span><br>                uart.write(out)<br>                time.sleep_ms(<span class="hljs-number">50</span>)<br><br></code></pre></td></tr></table></figure>



<h2 id="其他事件"><a href="#其他事件" class="headerlink" title="其他事件"></a>其他事件</h2><p>li_wan_ling过来问我FPGA相关的，算是一无所知然后在tb里面连线？相当复杂来着，东西是集创赛里的。</p>
<p>我没找出问题，不过嘛,没问题才奇怪吧，她很多没改直接copy，axi_uart模块好多引脚直接接地了，总之最终输出波形为0，任重而道远啊，下面把部分代码贴出来</p>
<p><a href="./files/1.pdf">点击这里查看完整文档</a></p>
<p>tb里的</p>
<details> 
<summary><font size="4" color="orange">Show Code</font></summary> 
<pre><code class="language-cpp">`timescale 1ns / 1ps
`include "config.h"

<p><code>define UART_PSEL               u_soc_top.u_axi_uart_controller.uart0.PSEL </code>define UART_PENBLE             u_soc_top.u_axi_uart_controller.uart0.PENABLE<br><code>define UART_PWRITE             u_soc_top.u_axi_uart_controller.uart0.PWRITE </code>define UART_WADDR              u_soc_top.u_axi_uart_controller.uart0.PADDR[7:0]<br>&#96;define UART_WDATA              u_soc_top.u_axi_uart_controller.uart0.PWDATA[7:0]</p>
<p>module tb_top( );<br>reg reset;<br>reg clk;<br>reg   [3:0]  touch_btn;<br>reg   [31:0]  dip_sw;</p>
<p>wire         UART_RX;<br>wire         UART_TX;<br>wire  [2:0]  video_red;<br>wire  [2:0]  video_green;<br>wire  [1:0]  video_blue;<br>wire  video_hsync;<br>wire  video_vsync;<br>wire  video_clk;<br>wire  video_de;<br>wire  [15:0]  leds;<br>wire  [7:0]  dpy0;<br>wire  [7:0]  dpy1;<br>wire  [19:0]  base_ram_addr;<br>wire  [ 3:0]  base_ram_be_n;<br>wire  base_ram_ce_n;<br>wire  base_ram_oe_n;<br>wire  base_ram_we_n;<br>wire  [19:0]  ext_ram_addr;<br>wire  [ 3:0]  ext_ram_be_n;<br>wire  ext_ram_ce_n;<br>wire  ext_ram_oe_n;<br>wire  ext_ram_we_n;<br>wire  [31:0]  base_ram_data;<br>wire  [31:0]  ext_ram_data;</p>
<p>initial<br>begin<br>    clk &#x3D; 1’b0;<br>    reset &#x3D; 1’b1;<br>    dip_sw &#x3D; 32’h0;<br>    #2000;<br>    reset &#x3D; 1’b0;<br>end<br>always #10 clk&#x3D;~clk;</p>
<p>initial<br>begin<br>    touch_btn &#x3D; 4’h0;<br>    dip_sw    &#x3D; 32’h0000_abcd;</p>
<pre><code class="hljs">#3000000;

#100000
touch_btn = 4&#39;b0001;
#50
touch_btn = 4&#39;b0000;

#100000
touch_btn = 4&#39;b0010;
#50
touch_btn = 4&#39;b0000;

#100000
touch_btn = 4&#39;b0100;
#50
touch_btn = 4&#39;b0000;

#100000
touch_btn = 4&#39;b1000;
#50
touch_btn = 4&#39;b0000;
</code></pre>
<p>end</p>
<p>soc_top  #(.SIMULATION(1’b1)) u_soc_top (<br>    .clk                     ( clk           ),<br>    .reset                   ( reset         ),<br>    .touch_btn               ( touch_btn     ),<br>    .dip_sw                  ( dip_sw        ),</p>
<pre><code class="hljs">.video_red               ( video_red     ),
.video_green             ( video_green   ),
.video_blue              ( video_blue    ),
.video_hsync             ( video_hsync   ),
.video_vsync             ( video_vsync   ),
.video_clk               ( video_clk     ),
.video_de                ( video_de      ),
.leds                    ( leds          ),
.dpy0                    ( dpy0          ),
.dpy1                    ( dpy1          ),

.base_ram_addr           ( base_ram_addr   ),
.base_ram_be_n           ( base_ram_be_n   ),
.base_ram_ce_n           ( base_ram_ce_n   ),
.base_ram_oe_n           ( base_ram_oe_n   ),
.base_ram_we_n           ( base_ram_we_n   ),
.ext_ram_addr            ( ext_ram_addr    ),
.ext_ram_be_n            ( ext_ram_be_n    ),
.ext_ram_ce_n            ( ext_ram_ce_n    ),
.ext_ram_oe_n            ( ext_ram_oe_n    ),
.ext_ram_we_n            ( ext_ram_we_n    ),

.base_ram_data           ( base_ram_data   ),
.ext_ram_data            ( ext_ram_data    ),

.UART_RX                 ( UART_RX       ),
.UART_TX                 ( UART_TX       )
</code></pre>
<p>);</p>
<p>&#x2F;&#x2F;模拟串口打印<br>wire uart_display;<br>wire [7:0] uart_data;<br>wire uart_wen;<br>assign uart_wen &#x3D; (<code>UART_PSEL == 1&#39;b1) &amp;&amp;  (</code>UART_PENBLE &#x3D;&#x3D; 1’b1) &amp;&amp; (<code>UART_PWRITE == 1&#39;b1); assign uart_display = (uart_wen == 1&#39;b1) &amp;&amp; (</code>UART_WADDR &#x3D;&#x3D; 8’h0);<br>assign uart_data    &#x3D; &#96;UART_WDATA;</p>
<p>always @(posedge clk)<br>begin<br>    if(uart_display)<br>    begin<br>        if(uart_data&#x3D;&#x3D;8’hff)<br>        begin<br>            ;&#x2F;&#x2F;$finish;<br>        end<br>        else<br>        begin<br>            $write(“%c”,uart_data);<br>        end<br>    end<br>end</p>
<p>sram_sp #(<br>    .AW        ( 18     ),<br>    .Init_File(&#96;SRAM_Init_File))<br>base_sram_sp (<br>    .ram_addr                ( base_ram_addr   ),<br>    .ram_be_n                ( base_ram_be_n   ),<br>    .ram_ce_n                ( base_ram_ce_n   ),<br>    .ram_oe_n                ( base_ram_oe_n   ),<br>    .ram_we_n                ( base_ram_we_n   ),</p>
<pre><code class="hljs">.ram_data                ( base_ram_data   )
</code></pre>
<p>);</p>
<p>sram_sp #(<br>    .AW        ( 18     ),<br>    .Init_File(&#96;SRAM_Init_File))<br>ext_sram_sp (<br>    .ram_addr                ( ext_ram_addr   ),<br>    .ram_be_n                ( ext_ram_be_n   ),<br>    .ram_ce_n                ( ext_ram_ce_n   ),<br>    .ram_oe_n                ( ext_ram_oe_n   ),<br>    .ram_we_n                ( ext_ram_we_n   ),</p>
<pre><code class="hljs">.ram_data                ( ext_ram_data   )
</code></pre>
<p>);</p>
<p>endmodule</code><br></pre> </details>    </p>
<p>soc_top的</p>
<details> 
<summary><font size="4" color="orange">Show Code</font></summary> 
<pre><code class="language-cpp">`include "config.h"
module soc_top #(
    parameter SIMULATION = 1'b0
) (
    input clk,  //50MHz 时钟输入
    input reset,  //BTN6手动复位按钮开关，带消抖电路，按下时为1
    //图像输出信号
    output [2:0] video_red,  //红色像素，3位
    output [2:0] video_green,  //绿色像素，3位
    output [1:0] video_blue,  //蓝色像素，2位
    output video_hsync,  //行同步（水平同步）信号
    output video_vsync,  //场同步（垂直同步）信号
    output video_clk,  //像素时钟输出
    output video_de,  //行数据有效信号，用于区分消隐区
    input clock_btn,  //BTN5手动时钟按钮开关，带消抖电路，按下时为1
    input [3:0] touch_btn,  //BTN1~BTN4，按钮开关，按下时为1
    input [31:0] dip_sw,  //32位拨码开关，拨到“ON”时为1
    output [15:0] leds,  //16位LED，输出时1点亮
    output [7:0] dpy0,  //数码管低位信号，包括小数点，输出1点亮
    output [7:0] dpy1,  //数码管高位信号，包括小数点，输出1点亮
    //BaseRAM信号
    inout [31:0] base_ram_data,  //BaseRAM数据，低8位与CPLD串口控制器共享
    output [19:0] base_ram_addr,  //BaseRAM地址
    output [ 3:0]   base_ram_be_n,      //BaseRAM字节使能，低有效。如果不使用字节使能，请保持为0
    output base_ram_ce_n,  //BaseRAM片选，低有效
    output base_ram_oe_n,  //BaseRAM读使能，低有效
    output base_ram_we_n,  //BaseRAM写使能，低有效
    //ExtRAM信号
    inout [31:0] ext_ram_data,  //ExtRAM数据
    output [19:0] ext_ram_addr,  //ExtRAM地址
    output [ 3:0]   ext_ram_be_n,       //ExtRAM字节使能，低有效。如果不使用字节使能，请保持为0
    output ext_ram_ce_n,  //ExtRAM片选，低有效
    output ext_ram_oe_n,  //ExtRAM读使能，低有效
    output ext_ram_we_n,  //ExtRAM写使能，低有效
    //Flash存储器信号，参考 JS28F640 芯片手册
    output [22:0] flash_a,  //Flash地址，a0仅在8bit模式有效，16bit模式无意义
    inout [15:0] flash_d,  //Flash数据
    output flash_rp_n,  //Flash复位信号，低有效
    output flash_vpen,  //Flash写保护信号，低电平时不能擦除、烧写
    output flash_ce_n,  //Flash片选信号，低有效
    output flash_oe_n,  //Flash读使能信号，低有效
    output flash_we_n,  //Flash写使能信号，低有效
    output          flash_byte_n,       //Flash 8bit模式选择，低有效。在使用flash的16位模式时请设为1
    //------uart-------
    inout UART_RX,  //串口RX接收
    inout UART_TX  //串口TX发送
);
  wire cpu_clk;
  wire cpu_resetn;
  wire sys_clk;
  wire sys_resetn;
  generate
    if (SIMULATION) begin : sim_clk
      //simulation clk.
      reg clk_sim;
      initial begin
        clk_sim = 1'b0;
      end
      always #15 clk_sim = ~clk_sim;
      assign cpu_clk = clk_sim;
      assign sys_clk = clk;
      rst_sync u_rst_sys (
          .clk(sys_clk),
          .rst_n_in(~reset),
          .rst_n_out(sys_resetn)
      );
      rst_sync u_rst_cpu (
          .clk(cpu_clk),
          .rst_n_in(sys_resetn),
          .rst_n_out(cpu_resetn)
      );
    end else begin : pll_clk
      clk_pll u_clk_pll (
          .cpu_clk(cpu_clk),
          .sys_clk(sys_clk),
          .resetn (~reset),
          .locked (pll_locked),
          .clk_in1(clk)
      );
      rst_sync u_rst_sys (
          .clk(sys_clk),
          .rst_n_in(pll_locked),
          .rst_n_out(sys_resetn)
      );
      rst_sync u_rst_cpu (
          .clk(cpu_clk),
          .rst_n_in(sys_resetn),
          .rst_n_out(cpu_resetn)
      );
    end
  endgenerate
  //TODO: add your code
  //例化OpenLA500处理器核
  core_top u_cpu (
      //外部中断信号
      .intrpt(8'h0),  //high active
      .aclk(cpu_clk),
      .aresetn(cpu_resetn),  //low active
      //读地址通道
      .arid(cpu_arid),
      .araddr(cpu_araddr),
      .arlen(cpu_arlen),
      .arsize(cpu_arsize),
      .arburst(cpu_arburst),
      .arlock(cpu_arlock),
      .arcache(cpu_arcache),
      .arprot(cpu_arprot),
      .arvalid(cpu_arvalid),
      .arready(cpu_arready),
      //读数据通道
      .rid(cpu_rid),
      .rdata(cpu_rdata),
      .rresp(cpu_rresp),
      .rlast(cpu_rlast),
      .rvalid(cpu_rvalid),
      .rready(cpu_rready),
      //写地址通道
      .awid(cpu_awid),
      .awaddr(cpu_awaddr),
      .awlen(cpu_awlen),
      .awsize(cpu_awsize),
      .awburst(cpu_awburst),
      .awlock(cpu_awlock),
      .awcache(cpu_awcache),
      .awprot(cpu_awprot),
      .awvalid(cpu_awvalid),
      .awready(cpu_awready),
      //写数据通道
      .wid(cpu_wid),
      .wdata(cpu_wdata),
      .wstrb(cpu_wstrb),
      .wlast(cpu_wlast),
      .wvalid(cpu_wvalid),
      .wready(cpu_wready),
      //写响应通道
      .bid(cpu_bid),
      .bresp(cpu_bresp),
      .bvalid(cpu_bvalid),
      .bready(cpu_bready),
      //已弃用
      .break_point(1'b0),
      .infor_flag(1'b0),
      .reg_num(5'b0),
      .ws_valid(),
      .rf_rdata(),
      //写回阶段提供的调试信息
      .debug0_wb_pc(debug_wb_pc),
      .debug0_wb_inst(debug_wb_inst),
      .debug0_wb_rf_wen(debug_wb_rf_wen),
      .debug0_wb_rf_wnum(debug_wb_rf_wnum),
      .debug0_wb_rf_wdata(debug_wb_rf_wdata)
  );
  //例化Axi_CDC
  Axi_CDC u_Axi_CDC (
      .axiInClk (cpu_clk),
      .axiInRst (cpu_resetn),
      .axiOutClk(sys_clk),
      .axiOutRst(sys_clk),
      //in
      //aw
      .axiIn_awvalid(cpu_awvalid),
      .axiIn_awready(cpu_awready),
      .axiIn_awaddr (cpu_awaddr),
      .axiIn_awid   (cpu_awid),
      .axiIn_awlen  (cpu_awlen),
      .axiIn_awsize (cpu_awsize),
      .axiIn_awburst(cpu_awburst),
      .axiIn_awlock (cpu_awlock),
      .axiIn_awcache(cpu_awcache),
      .axiIn_awprot (cpu_awprot),
      //w
      .axiIn_wvalid(cpu_wvalid),
      .axiIn_wready(cpu_wready),
      .axiIn_wdata (cpu_wdata),
      .axiIn_wstrb (cpu_wstrb),
      .axiIn_wlast (cpu_wlast),
      //b
      .axiIn_bready(cpu_bready),
      .axiIn_bvalid(cpu_bvalid),
      .axiIn_bid   (cpu_bid),
      .axiIn_bresp (cpu_bresp),
      //ar
      .axiIn_arvalid(cpu_arvalid),
      .axiIn_arready(cpu_arready),
      .axiIn_araddr (cpu_araddr),
      .axiIn_arid   (cpu_arid),
      .axiIn_arlen  (cpu_arlen),
      .axiIn_arsize (cpu_arsize),
      .axiIn_arburst(cpu_arburst),
      .axiIn_arlock (cpu_arlock),
      .axiIn_arcache(cpu_arcache),
      .axiIn_arprot (cpu_arprot),
      //r
      .axiIn_rvalid(cpu_rvalid),
      .axiIn_rready(cpu_rready),
      .axiIn_rdata (cpu_rdata),
      .axiIn_rid   (cpu_rid),
      .axiIn_rresp (cpu_rresp),
      .axiIn_rlast (cpu_rlast),
      //out
      //aw
      .axiOut_awvalid(cpu_sync_awvalid),
      .axiOut_awready(cpu_sync_awready),
      .axiOut_awaddr (cpu_sync_awaddr),
      .axiOut_awid   (cpu_sync_awid),
      .axiOut_awlen  (cpu_sync_awlen),
      .axiOut_awsize (cpu_sync_awsize),
      .axiOut_awburst(cpu_sync_awburst),
      .axiOut_awlock (cpu_sync_awlock),
      .axiOut_awcache(cpu_sync_awcache),
      .axiOut_awprot (cpu_sync_awprot),
      //w
      .axiOut_wvalid(cpu_sync_wvalid),
      .axiOut_wready(cpu_sync_wready),
      .axiOut_wdata (cpu_sync_wdata),
      .axiOut_wstrb (cpu_sync_wstrb),
      .axiOut_wlast (cpu_sync_wlast),
      //b
      .axiOut_bready(cpu_sync_bready),
      .axiOut_bvalid(cpu_sync_bvalid),
      .axiOut_bid   (cpu_sync_bid),
      .axiOut_bresp (cpu_sync_bresp),
      //ar
      .axiOut_arvalid(cpu_sync_arvalid),
      .axiOut_arready(cpu_sync_arready),
      .axiOut_araddr (cpu_sync_araddr),
      .axiOut_arid   (cpu_sync_arid),
      .axiOut_arlen  (cpu_sync_arlen),
      .axiOut_arsize (cpu_sync_arsize),
      .axiOut_arburst(cpu_sync_arburst),
      .axiOut_arlock (cpu_sync_arlock),
      .axiOut_arcache(cpu_sync_arcache),
      .axiOut_arprot (cpu_sync_arprot),
      //r
      .axiOut_rvalid(cpu_sync_rvalid),
      .axiOut_rready(cpu_sync_rready),
      .axiOut_rdata (cpu_sync_rdata),
      .axiOut_rid   (cpu_sync_rid),
      .axiOut_rresp (cpu_sync_rresp),
      .axiOut_rlast (cpu_sync_rlast)
  );
  //例化AxiCrossbar_1x4
  assign axiOut_2_arready = 1'b1;
  assign axiOut_2_rid = 5'b0;
  assign axiOut_2_rdata = 32'b0;
  assign axiOut_2_rresp = 2'b0;
  assign axiOut_2_rlast = 1'b0;
  assign axiOut_2_rvalid = 1'b0;
  assign axiOut_2_awready = 1'b1;
  assign axiOut_2_wready = 1'b1;
  assign axiOut_2_bid = 5'b0;
  assign axiOut_2_bresp = 2'b0;
  assign axiOut_2_bvalid = 1'b0;
  AxiCrossbar_1x4 u_AxiCrossbar_1x4 (
      .clk   (sys_clk),
      .resetn(sys_resetn),
      //master 0
      //aw
      .axiIn_awvalid(cpu_sync_awvalid),
      .axiIn_awready(cpu_sync_awready),
      .axiIn_awaddr (cpu_sync_awaddr),
      .axiIn_awid   (cpu_sync_awid),
      .axiIn_awlen  (cpu_sync_awlen),
      .axiIn_awsize (cpu_sync_awsize),
      .axiIn_awburst(cpu_sync_awburst),
      .axiIn_awlock (cpu_sync_awlock),
      .axiIn_awcache(cpu_sync_awcache),
      .axiIn_awprot (cpu_sync_awprot),
      //w
      .axiIn_wvalid(cpu_sync_wvalid),
      .axiIn_wready(cpu_sync_wready),
      .axiIn_wdata (cpu_sync_wdata),
      .axiIn_wstrb (cpu_sync_wstrb),
      .axiIn_wlast (cpu_sync_wlast),
      //b
      .axiIn_bready(cpu_sync_bread),
      .axiIn_bvalid(cpu_sync_bvalid),
      .axiIn_bid   (cpu_sync_bid),
      .axiIn_bresp (cpu_sync_bresp),
      //ar
      .axiIn_arvalid(cpu_sync_arvalid),
      .axiIn_arready(cpu_sync_arready),
      .axiIn_araddr (cpu_sync_araddr),
      .axiIn_arid   (cpu_sync_arid),
      .axiIn_arlen  (cpu_sync_arlen),
      .axiIn_arsize (cpu_sync_arsize),
      .axiIn_arburst(cpu_sync_arburst),
      .axiIn_arlock (cpu_sync_arlock),
      .axiIn_arcache(cpu_sync_arcache),
      .axiIn_arprot (cpu_sync_arprot),
      //r
      .axiIn_rvalid(cpu_sync_rvalid),
      .axiIn_rready(cpu_sync_rready),
      .axiIn_rdata (cpu_sync_rdata),
      .axiIn_rid   (cpu_sync_rid),
      .axiIn_rresp (cpu_sync_rresp),
      .axiIn_rlast (cpu_sync_rlast),
      //slave 0
      //aw
      .axiOut_0_awvalid(ram_awvalid),
      .axiOut_0_awready(ram_awready),
      .axiOut_0_awaddr (ram_awaddr),
      .axiOut_0_awid   (ram_awid),
      .axiOut_0_awlen  (ram_awlen),
      .axiOut_0_awsize (ram_awsize),
      .axiOut_0_awburst(ram_awburst),
      .axiOut_0_awlock (ram_awlock),
      .axiOut_0_awcache(ram_awcache),
      .axiOut_0_awprot (ram_awprot),
      //w
      .axiOut_0_wvalid(ram_wvalid),
      .axiOut_0_wready(ram_wready),
      .axiOut_0_wdata (ram_wdata),
      .axiOut_0_wstrb (ram_wstrb),
      .axiOut_0_wlast (ram_wlast),
      //b
      .axiOut_0_bready(ram_bready),
      .axiOut_0_bvalid(ram_bvalid),
      .axiOut_0_bid   (ram_bid),
      .axiOut_0_bresp (ram_bresp),
      //ar
      .axiOut_0_arvalid(ram_arvalid),
      .axiOut_0_arready(ram_arready),
      .axiOut_0_araddr (ram_araddr),
      .axiOut_0_arid   (ram_arid),
      .axiOut_0_arlen  (ram_arlen),
      .axiOut_0_arsize (ram_arsize),
      .axiOut_0_arburst(ram_arburst),
      .axiOut_0_arlock (ram_arlock),
      .axiOut_0_arcache(ram_arcache),
      .axiOut_0_arprot (ram_arprot),
      //r
      .axiOut_0_rvalid(ram_rvalid),
      .axiOut_0_rready(ram_rready),
      .axiOut_0_rdata (ram_rdata),
      .axiOut_0_rid   (ram_rid),
      .axiOut_0_rresp (ram_rres),
      .axiOut_0_rlast (ram_rlast),
      //slave1
      //aw
      .axiOut_1_awvalid(uart_awvalid),
      .axiOut_1_awready(uart_awready),
      .axiOut_1_awaddr (uart_awaddr),
      .axiOut_1_awid   (uart_awid),
      .axiOut_1_awlen  (uart_awlen),
      .axiOut_1_awsize (uart_awsize),
      .axiOut_1_awburst(uart_awburst),
      .axiOut_1_awlock (uart_awlock),
      .axiOut_1_awcache(uart_awcache),
      .axiOut_1_awprot (uart_awprot),
      //w
      .axiOut_1_wvalid(uart_wvalid),
      .axiOut_1_wready(uart_wready),
      .axiOut_1_wdata (uart_wdata),
      .axiOut_1_wstrb (uart_wstrb),
      .axiOut_1_wlast (uart_wlast),
      //b
      .axiOut_1_bready(uart_bready),
      .axiOut_1_bvalid(uart_bvalid),
      .axiOut_1_bid   (uart_bid),
      .axiOut_1_bresp (uart_bresp),
      //ar
      .axiOut_1_arvalid(uart_arvalid),
      .axiOut_1_arready(uart_arready),
      .axiOut_1_araddr (uart_araddr),
      .axiOut_1_arid   (uart_arid),
      .axiOut_1_arlen  (uart_arlen),
      .axiOut_1_arsize (uart_arsize),
      .axiOut_1_arburst(uart_arburst),
      .axiOut_1_arlock (uart_arlock),
      .axiOut_1_arcache(uart_arcache),
      .axiOut_1_arprot (uart_arprot),
      //r
      .axiOut_1_rvalid(uart_rvalid),
      .axiOut_1_rready(uart_rready),
      .axiOut_1_rdata (uart_rdata),
      .axiOut_1_rid   (uart_rid),
      .axiOut_1_rresp (uart_rres),
      .axiOut_1_rlast (uart_rlast),
      //slave3
      //aw
      .axiOut_3_awvalid(confreg_awvalid),
      .axiOut_3_awready(confreg_awready),
      .axiOut_3_awaddr (confreg_awaddr),
      .axiOut_3_awid   (confreg_awid),
      .axiOut_3_awlen  (confreg_awlen),
      .axiOut_3_awsize (confreg_awsize),
      .axiOut_3_awburst(confreg_awburst),
      .axiOut_3_awlock (confreg_awlock),
      .axiOut_3_awcache(confreg_awcache),
      .axiOut_3_awprot (confreg_awprot),
      //w
      .axiOut_3_wvalid(confreg_wvalid),
      .axiOut_3_wready(confreg_wready),
      .axiOut_3_wdata (confreg_wdata),
      .axiOut_3_wstrb (confreg_wstrb),
      .axiOut_3_wlast (confreg_wlast),
      //b
      .axiOut_3_bready(confreg_bready),
      .axiOut_3_bvalid(confreg_bvalid),
      .axiOut_3_bid   (confreg_bid),
      .axiOut_3_bresp (confreg_bresp),
      //ar
      .axiOut_3_arvalid(confreg_arvalid),
      .axiOut_3_arready(confreg_arready),
      .axiOut_3_araddr (confreg_araddr),
      .axiOut_3_arid   (confreg_arid),
      .axiOut_3_arlen  (confreg_arlen),
      .axiOut_3_arsize (confreg_arsize),
      .axiOut_3_arburst(confreg_arburst),
      .axiOut_3_arlock (confreg_arlock),
      .axiOut_3_arcache(confreg_arcache),
      .axiOut_3_arprot (confreg_arprot),
      //r
      .axiOut_3_rvalid(confreg_rvalid),
      .axiOut_3_rready(confreg_rready),
      .axiOut_3_rdata (confreg_rdata),
      .axiOut_3_rid   (confreg_rid),
      .axiOut_3_rresp (confreg_rres),
      .axiOut_3_rlast (confreg_rlast)
  );
  //例化sram
  //axi ram
  axi_wrap_ram_sp_ext u_axi_ram (
      .aclk(sys_clk),
      .aresetn(sys_resetn),  //ar .axi_arid ( ram_arid ),
      .axi_araddr (ram_araddr),
      .axi_arlen  (ram_arlen),
      .axi_arsize (ram_arsize),
      .axi_arburst(ram_arburst),
      .axi_arlock (ram_arlock),
      .axi_arcache(ram_arcache),
      .axi_arprot (ram_arprot),
      .axi_arvalid(ram_arvalid),
      .axi_arready(ram_arready),
      //r
      .axi_rid(ram_rid),
      .axi_rdata(ram_rdata),
      .axi_rresp(ram_rresp),
      .axi_rlast(ram_rlast),
      .axi_rvalid(ram_rvalid),
      .axi_rready(ram_rready),
      //aw
      .axi_awid(ram_awid),
      .axi_awaddr(ram_awaddr),
      .axi_awlen(ram_awlen),
      .axi_awsize(ram_awsize),
      .axi_awburst(ram_awburst),
      .axi_awlock(ram_awlock),
      .axi_awcache(ram_awcache),
      .axi_awprot(ram_awprot),
      .axi_awvalid(ram_awvalid),
      .axi_awready(ram_awready),
      //w
      .axi_wdata (ram_wdata),
      .axi_wstrb (ram_wstrb),
      .axi_wlast (ram_wlast),
      .axi_wvalid(ram_wvalid),
      .axi_wready(ram_wready),
      //b ram
      .axi_bid(ram_bid),
      .axi_bresp(ram_bresp),
      .axi_bvalid(ram_bvalid),
      .axi_bready(ram_bready),
      .base_ram_addr(base_ram_addr),
      .base_ram_be_n(base_ram_be_n),
      .base_ram_ce_n(base_ram_ce_n),
      .base_ram_oe_n(base_ram_oe_n),
      .base_ram_we_n(base_ram_we_n),
      .ext_ram_addr (ext_ram_addr),
      .ext_ram_be_n (ext_ram_be_n),
      .ext_ram_ce_n (ext_ram_ce_n),
      .ext_ram_oe_n (ext_ram_oe_n),
      .ext_ram_we_n (ext_ram_we_n),
      .base_ram_data(base_ram_data),
      .ext_ram_data (ext_ram_data)
  );
  //例化uart
  //uart
  wire UART_CTS, UART_RTS;
  wire UART_DTR, UART_DSR;
  wire UART_RI, UART_DCD;
  assign UART_CTS = 1'b0;
  assign UART_DSR = 1'b0;
  assign UART_DCD = 1'b0;
  assign UART_RI  = 1'b0;
  wire uart0_int;
  wire uart0_txd_o;
  wire uart0_txd_i;
  wire uart0_txd_oe;
  wire uart0_rxd_o;
  wire uart0_rxd_i;
  wire uart0_rxd_oe;
  wire uart0_rts_o;
  wire uart0_cts_i;
  wire uart0_dsr_i;
  wire uart0_dcd_i;
  wire uart0_dtr_o;
  wire uart0_ri_i;
  assign UART_RX = uart0_rxd_oe ? 1'bz : uart0_rxd_o;
  assign UART_TX = uart0_txd_oe ? 1'bz : uart0_txd_o;
  assign UART_RTS = uart0_rts_o;
  assign UART_DTR = uart0_dtr_o;
  assign uart0_txd_i = UART_TX;
  assign uart0_rxd_i = UART_RX;
  assign uart0_cts_i = UART_CTS;
  assign uart0_dcd_i = UART_DCD;
  assign uart0_dsr_i = UART_DSR;
  assign uart0_ri_i = UART_RI;
  //UART_CONTROLLER
  axi_uart_controller u_axi_uart_controller (
      .clk  (sys_clk),
      .rst_n(sys_resetn),
      .axi_s_awid(uart_awid),
      .axi_s_awaddr(uart_awaddr),
      .axi_s_awlen(uart_awlen),
      .axi_s_awsize(uart_awsize),
      .axi_s_awburst(uart_awburst),
      .axi_s_awlock(uart_awlock),
      .axi_s_awcache(uart_awcache),
      .axi_s_awprot(uart_awprot),
      .axi_s_awvalid(uart_awvalid),
      .axi_s_awready(uart_awready),
      .axi_s_wid(uart_wid),
      .axi_s_wdata(uart_wdata),
      .axi_s_wstrb(uart_wstrb),
      .axi_s_wlast(uart_wlast),
      .axi_s_wvalid(uart_wvalid),
      .axi_s_wready(uart_wready),
      .axi_s_bid(uart_bid),
      .axi_s_bresp(uart_bresp),
      .axi_s_bvalid(uart_bvalid),
      .axi_s_bready(uart_bready),
      .axi_s_arid(uart_arid),
      .axi_s_araddr(uart_araddr),
      .axi_s_arlen(uart_arlen),
      .axi_s_arsize(uart_arsize),
      .axi_s_arburst(uart_arburst),
      .axi_s_arlock(uart_arlock),
      .axi_s_arcache(uart_arcache),
      .axi_s_arprot(uart_arprot),
      .axi_s_arvalid(uart_arvalid),
      .axi_s_arready(uart_arready),
      .axi_s_rid(uart_rid),
      .axi_s_rdata(uart_rdata),
      .axi_s_rresp(uart_rresp),
      .axi_s_rlast(uart_rlast),
      .axi_s_rvalid(uart_rvalid),
      .axi_s_rready(uart_rready),
      .apb_rw_dma(1'b0),
      .apb_psel_dma(1'b0),
      .apb_enab_dma(1'b0),
      .apb_addr_dma(20'b0),
      .apb_valid_dma(1'b0),
      .apb_wdata_dma(32'b0),
      .apb_rdata_dma(),
      .apb_ready_dma(),
      .dma_grant(),
      .dma_req_o(),
      .dma_ack_i(1'b0),
      //UART0 
      .uart0_txd_i(uart0_txd_i),
      .uart0_txd_o(uart0_txd_o),
      .uart0_txd_oe(uart0_txd_oe),
      .uart0_rxd_i(uart0_rxd_i),
      .uart0_rxd_o(uart0_rxd_o),
      .uart0_rxd_oe(uart0_rxd_oe),
      .uart0_rts_o(uart0_rts_o),
      .uart0_dtr_o(uart0_dtr_o),
      .uart0_cts_i(uart0_cts_i),
      .uart0_dsr_i(uart0_dsr_i),
      .uart0_dcd_i(uart0_dcd_i),
      .uart0_ri_i(uart0_ri_i),
      .uart0_int(uart0_int)
  );
  //例化confreg
  confreg #(
      .SIMULATION(SIMULATION)
  ) u_confreg (
      .aclk(sys_clk),
      .aresetn(sys_resetn),
      .cpu_clk(cpu_clk),
      .cpu_resetn(cpu_resetn),
      .s_awid(confreg_awid),
      .s_awaddr(confreg_awaddr),
      .s_awlen(confreg_awlen),
      .s_awsize(confreg_awsize),
      .s_awburst(confreg_awburst),
      .s_awlock(confreg_awlock),
      .s_awcache(confreg_awcache),
      .s_awprot(confreg_awprot),
      .s_awvalid(confreg_awvalid),
      .s_wid(confreg_wid),
      .s_wdata(confreg_wdata),
      .s_wstrb(confreg_wstrb),
      .s_wlast(confreg_wlast),
      .s_wvalid(confreg_wvalid),
      .s_bready(confreg_bready),
      .s_arid(confreg_arid),
      .s_araddr(confreg_araddr),
      .s_arlen(confreg_arlen),
      .s_arsize(confreg_arsize),
      .s_arburst(confreg_arburst),
      .s_arlock(confreg_arlock),
      .s_arcache(confreg_arcache),
      .s_arprot(confreg_arprot),
      .s_arvalid(confreg_arvalid),
      .s_rready(confreg_rready),
      .s_awready(confreg_awready),
      .s_wready(confreg_wready),
      .s_bid(confreg_bid),
      .s_bresp(confreg_bresp),
      .s_bvalid(confreg_bvalid),
      .s_arready(confreg_arready),
      .s_rid(confreg_rid),
      .s_rdata(confreg_rdata),
      .s_rresp(confreg_rresp),
      .s_rlast(confreg_rlast),
      .s_rvalid(confreg_rvalid),
      .switch(dip_sw),
      .touch_btn(touch_btn),
      .led(leds),
      .dpy0(dpy0),
      .dpy1(dpy1),
      .confreg_int()
  );
endmodule</code>
</pre> </details>




                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>25-4-26</div>
      <div>https://xin7104.github.io/2025/04/26/25-4-26/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>April 26, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/04/25/25-4-25/" title="25-4-25">
                        <span class="hidden-mobile">25-4-25</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
